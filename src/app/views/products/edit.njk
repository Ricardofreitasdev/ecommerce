{% extends "layout.njk" %}

{% block content %}

    <section class="container form">

        <form method="POST" action="/products?_method=PUT">
            <div class="header">
                <h3>Editar Produto id: {{product.id}}</h3>
            </div>

            <div class="fields">
                {% include 'products/fieldsEdit.njk' %}
                <input type="hidden" name="id" value={{product.id}}>
            </div>

            <button class="button" type="submit">Atualizar</button>
        </form>

        <form id="form-delete" action="/products?_method=DELETE" method="post">
            <input type="hidden" name="id" value={{product.id}}>
            <button class="button delete" type="submit">Deletar</button>
        </form>

    </section>

    <script>
    const formDelete = document.querySelector("#form-delete")
    formDelete.addEventListener("submit", function () {
        const answer = confirm("Deseja deletar?")

        if (!answer) {
            event.preventDefault()
        }
    });
</script>

{% endblock content %}